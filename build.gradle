buildscript {
    ext {
        morpherGroupId = 'com.github.szgabsz91'
        morpherVersion = '1.0.0-SNAPSHOT'

        javaVersion = '12'

        checkstyleVersion = '8.20'
        guavaVersion = '27.1-jre'
        jacocoVersion = '0.8.3'
        pmdVersion = '6.14.0'
        protobufGradlePluginVersion = '0.8.8'
        protocVersion = '3.7.1'
        spotbugsVersion = '3.1.12'
        spotbugsGradlePluginVersion = '1.7.1'

        combinatoricslibVersion = '3.3.0'
        commonsCliVersion = '1.4'
        commonsCollectionsVersion = '4.3'
        commonsLangVersion = '3.9'
        commonsTextVersion = '1.6'
        gsonVersion = '2.8.5'
        logbackVersion = '1.2.3'
        luceneCoreVersion = '8.0.0'
        protobufVersion = '3.7.1'
        slf4jVersion = '1.7.26'
        velocityVersion = '2.1'
        zip4jVersion = '1.3.2'

        assertjVersion = '3.12.2'
        junitJupiterVersion = '5.4.2'
        junitPlatformVersion = '1.4.2'
        mockitoVersion = '2.27.0'

        springBootVersion = '2.1.4.RELEASE'
    }

    repositories {
        mavenCentral()

        maven {
            url 'https://plugins.gradle.org/m2'
        }

        maven {
            url 'https://repo.spring.io/snapshot'
        }

        maven {
            url 'https://repo.spring.io/milestone'
        }
    }

    dependencies {
        classpath "gradle.plugin.com.github.spotbugs:spotbugs-gradle-plugin:${spotbugsGradlePluginVersion}"
        classpath "com.google.protobuf:protobuf-gradle-plugin:${protobufGradlePluginVersion}"
        classpath "org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}"
        // Workaround for Spotbugs vs Protobuf:
        // - https://github.com/spotbugs/spotbugs-gradle-plugin/issues/120
        // - https://github.com/GoogleContainerTools/jib/issues/591
        classpath "com.google.guava:guava:${guavaVersion}"
    }
}

subprojects {
    group = morpherGroupId
    version = morpherVersion

    apply from: "$rootDir/gradle/java.gradle"
    apply from: "$rootDir/gradle/static-code-analysis.gradle"
    apply from: "$rootDir/gradle/maven.gradle"
    apply from: "$rootDir/gradle/ide.gradle"

    repositories {
        mavenLocal()
        jcenter()

        maven {
            url 'https://repo.spring.io/snapshot'
        }

        maven {
            url 'https://repo.spring.io/milestone'
        }
    }
}
